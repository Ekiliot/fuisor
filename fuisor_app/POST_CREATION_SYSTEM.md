# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤ —Å –º–µ–¥–∏–∞ –∫–∞–∫ –≤ Instagram

## –û–ø–∏—Å–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –∏ –≤–∏–¥–µ–æ, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è Instagram. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–¥–∏–∞ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç—ã —Å –ø–æ–¥–ø–∏—Å—è–º–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. MediaSelectionScreen - –í—ã–±–æ—Ä –º–µ–¥–∏–∞
**–§–∞–π–ª:** `fuisor_app/lib/screens/media_selection_screen.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –í—ã–±–æ—Ä —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ —á–µ—Ä–µ–∑ `ImagePicker`
- –í—ã–±–æ—Ä –≤–∏–¥–µ–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ (–¥–æ 5 –º–∏–Ω—É—Ç)
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ–¥–∏–∞
- –ö–Ω–æ–ø–∫–∏ "Photo" –∏ "Video" –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
```dart
Future<void> _pickFromGallery() async {
  final XFile? image = await _picker.pickImage(
    source: ImageSource.gallery,
    maxWidth: 1920,
    maxHeight: 1920,
    imageQuality: 85,
  );
}

Future<void> _pickVideoFromGallery() async {
  final XFile? video = await _picker.pickVideo(
    source: ImageSource.gallery,
    maxDuration: const Duration(minutes: 5),
  );
}
```

### 2. CreatePostScreen - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
**–§–∞–π–ª:** `fuisor_app/lib/screens/create_post_screen.dart`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ–¥–∏–∞ (—Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ)
- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –ø–æ–¥–ø–∏—Å–∏ (caption)
- –ö–Ω–æ–ø–∫–∞ "Share" –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
```dart
Future<void> _createPost() async {
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –º–µ–¥–∏–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ–∞–π–ª–∞
  String mediaType = 'image';
  if (widget.selectedFile!.path.toLowerCase().contains('.mp4')) {
    mediaType = 'video';
  }
  
  // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —á–µ—Ä–µ–∑ PostsProvider
  await postsProvider.createPost(
    caption: _captionController.text.trim(),
    mediaBytes: mediaBytes,
    mediaFileName: mediaFileName,
    mediaType: mediaType,
  );
}
```

### 3. PostsProvider - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
**–§–∞–π–ª:** `fuisor_app/lib/providers/posts_provider.dart`

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:**
```dart
Future<void> createPost({
  required String caption,
  required Uint8List? mediaBytes,
  required String mediaFileName,
  required String mediaType,
  List<String>? mentions,
  List<String>? hashtags,
}) async {
  final newPost = await _apiService.createPost(
    caption: caption,
    mediaBytes: mediaBytes,
    mediaFileName: mediaFileName,
    mediaType: mediaType,
    mentions: mentions,
    hashtags: hashtags,
  );

  // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –ø–æ—Å—Ç –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞
  _posts.insert(0, newPost);
}
```

### 4. ApiService - API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
**–§–∞–π–ª:** `fuisor_app/lib/services/api_service.dart`

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:**
```dart
Future<Post> createPost({
  required String caption,
  required Uint8List? mediaBytes,
  required String mediaFileName,
  required String mediaType,
  List<String>? mentions,
  List<String>? hashtags,
}) async {
  var request = http.MultipartRequest(
    'POST',
    Uri.parse('$baseUrl/posts'),
  );

  // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è
  request.fields['caption'] = caption;
  request.fields['media_type'] = mediaType;
  
  // –î–æ–±–∞–≤–ª—è–µ–º –º–µ–¥–∏–∞ —Ñ–∞–π–ª
  if (mediaBytes != null) {
    request.files.add(
      http.MultipartFile.fromBytes(
        'media',
        mediaBytes,
        filename: mediaFileName,
      ),
    );
  }
}
```

### 5. MainScreen - –ù–∞–≤–∏–≥–∞—Ü–∏—è
**–§–∞–π–ª:** `fuisor_app/lib/screens/main_screen.dart`

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:**
```dart
onTap: (index) {
  if (index == 2) {
    // –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞ - –æ—Ç–∫—Ä—ã–≤–∞–µ–º MediaSelectionScreen
    Navigator.of(context).push(
      MaterialPageRoute(
        builder: (context) => const MediaSelectionScreen(),
      ),
    );
  } else {
    setState(() {
      _currentIndex = index;
    });
  }
},
```

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### üé® **–î–∏–∑–∞–π–Ω –≤ —Å—Ç–∏–ª–µ Instagram:**

1. **MediaSelectionScreen:**
   - –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ —Å —á–µ—Ä–Ω—ã–º —Ñ–æ–Ω–æ–º (#000000)
   - –ö–Ω–æ–ø–∫–∏ "Photo" (—Å–∏–Ω—è—è) –∏ "Video" (—Å–µ—Ä–∞—è)
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –º–µ–¥–∏–∞ –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
   - –ö–Ω–æ–ø–∫–∞ "Next" –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ—Å—Ç–∞

2. **CreatePostScreen:**
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –º–µ–¥–∏–∞ —Å–≤–µ—Ä—Ö—É (300px –≤—ã—Å–æ—Ç–∞)
   - –ü–æ–ª–µ –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ —Å —Ç–µ–º–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º
   - –ö–Ω–æ–ø–∫–∞ "Share" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞

### üì± **–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
```
MainScreen (–∫–Ω–æ–ø–∫–∞ +) 
    ‚Üì
MediaSelectionScreen (–≤—ã–±–æ—Ä –º–µ–¥–∏–∞)
    ‚Üì
CreatePostScreen (—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞)
    ‚Üì
MainScreen (–≤–æ–∑–≤—Ä–∞—Ç —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º)
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### üì¶ **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```yaml
dependencies:
  image_picker: ^1.0.4  # –í—ã–±–æ—Ä –º–µ–¥–∏–∞ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏
  video_player: ^2.8.1  # –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ
  photo_manager: ^3.0.0 # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–ª—è —Å–µ—Ç–∫–∏ –º–µ–¥–∏–∞
```

### üîÑ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞:**

1. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 1920x1920
   - –ö–∞—á–µ—Å—Ç–≤–æ: 85%
   - –§–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF, WebP

2. **–í–∏–¥–µ–æ:**
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 5 –º–∏–Ω—É—Ç
   - –§–æ—Ä–º–∞—Ç—ã: MP4, MOV, AVI
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —á–µ—Ä–µ–∑ VideoPlayerController

### üöÄ **–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞:**

1. **–í—ã–±–æ—Ä –º–µ–¥–∏–∞** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
2. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –º–µ–¥–∏–∞
3. **–í–≤–æ–¥ –ø–æ–¥–ø–∏—Å–∏** ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ
4. **–ó–∞–≥—Ä—É–∑–∫–∞** ‚Üí –º–µ–¥–∏–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
5. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞** ‚Üí –ø–æ—Å—Ç –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
6. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI** ‚Üí –Ω–æ–≤—ã–π –ø–æ—Å—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –ª–µ–Ω—Ç–µ

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤** –∫–∞–∫ –≤ Instagram  
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ** —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º  
‚úÖ **–ö—Ä–∞—Å–∏–≤—ã–π UI** –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏  
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API** —á–µ—Ä–µ–∑ –Ω–∞—à backend  
‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–µ–Ω—Ç—ã** –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞  

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "+"** –≤ –Ω–∏–∂–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
2. **–í—ã–±–µ—Ä–∏—Ç–µ "Photo" –∏–ª–∏ "Video"** –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–µ–¥–∏–∞
3. **–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä** –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
4. **–ù–∞–∂–º–∏—Ç–µ "Next"** –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ—Å—Ç–∞
5. **–í–≤–µ–¥–∏—Ç–µ –ø–æ–¥–ø–∏—Å—å** –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ
6. **–ù–∞–∂–º–∏—Ç–µ "Share"** –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞

**–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –ø–æ—Å—Ç–æ–≤ —Å –º–µ–¥–∏–∞!** üéâ
